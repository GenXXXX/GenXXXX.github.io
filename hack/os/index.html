<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="No more knowledge can be extracted from my telling">
<title>
    Operating Systems çŸ¥è¯†é€Ÿè®° - ç™½é©¬ç°é©¬
</title>


<link rel="shortcut icon" href="/sam.ico">








<link rel="stylesheet" href="/css/main.min.c5514d3530979d291f3497facc20da1cec870028dbc2a3630b64bab8721bbe49.css" integrity="sha256-xVFNNTCXnSkfNJf6zCDaHOyHACjbwqNjC2S6uHIbvkk=" crossorigin="anonymous" media="screen">




  






<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Operating Systems çŸ¥è¯†é€Ÿè®°"/>
<meta name="twitter:description" content="0. Concepts&nbsp;Â¶ Process: Program under execution
Thread: Smallest sequence of programmed instructions
Virtual Memory: the memory as viewed by the process. Each process believes it has a contiguous chunk of memory starting at location zero (Truman&rsquo;s virtual memory).
Semaphore: a variable or abstract data type used to control access to a common resource by multiple processes in a concurrent system
Deadlock: A deadlock occurs when every member of a set of processes is waiting for an event that can only be caused by a member of the set"/>

<meta property="og:title" content="Operating Systems çŸ¥è¯†é€Ÿè®°" />
<meta property="og:description" content="0. Concepts&nbsp;Â¶ Process: Program under execution
Thread: Smallest sequence of programmed instructions
Virtual Memory: the memory as viewed by the process. Each process believes it has a contiguous chunk of memory starting at location zero (Truman&rsquo;s virtual memory).
Semaphore: a variable or abstract data type used to control access to a common resource by multiple processes in a concurrent system
Deadlock: A deadlock occurs when every member of a set of processes is waiting for an event that can only be caused by a member of the set" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://GenXXXX.github.io/hack/os/" /><meta property="article:section" content="hack" />
<meta property="article:published_time" content="2017-12-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-12-13T00:00:00+00:00" />



    

    
    
    
    <title>
        
        Operating Systems çŸ¥è¯†é€Ÿè®°
        
    </title>
</head>

<body>
    
    
    <header class="wrap flex-container">
        <h1>Operating Systems çŸ¥è¯†é€Ÿè®°</h1>
    </header>
    
    <main class="wrap">
        
        <article role="article" class="flex-container">
<h1 id="0-concepts" class="anchor-link"><a href="#0-concepts">0. Concepts<span class="pilcrow">&nbsp;Â¶</span></a></h1>
<p><strong>Process</strong>: Program under execution</p>
<p><strong>Thread</strong>: Smallest sequence of programmed instructions</p>
<p><strong>Virtual Memory</strong>: the memory as viewed by the process. Each process believes it has a contiguous chunk of memory starting at location zero (Truman&rsquo;s virtual memory).</p>
<p><strong>Semaphore</strong>: a <a href="https://en.wikipedia.org/wiki/Variable_(programming)">variable</a> or <a href="https://en.wikipedia.org/wiki/Abstract_data_type">abstract data type</a> used to control access to a common resource by multiple <a href="https://en.wikipedia.org/wiki/Process_(computing)">processes</a> in a <a href="https://en.wikipedia.org/wiki/Concurrent_computing">concurrent</a> system</p>
<p><strong>Deadlock</strong>: A deadlock occurs when every member of a set of processes is waiting for an event that can only be caused by a member of the set</p>
<p><strong>MMU</strong>: Memory Management Unit, translate virtual addresses into physical addresses</p>
<p><strong>Page</strong>: The program is logically divided into fixed size pieces called pages</p>
<p><strong>Frame</strong>: The physical memory is similarly divided into fixed sized pieces called frames.</p>
<p><strong>Page Table</strong>: Table stores the mapping from page to frame</p>
<p><strong>Demand Paging</strong>: In a system that uses demand paging, the operating system copies a disk <a href="https://en.wikipedia.org/wiki/Paging">page</a> into physical memory only if an attempt is made to access it and that page is not already in memory</p>
<p><strong>TLB</strong>: Translation Lookaside Buffer, part of MMU, memory cache stores recent translations from virtual memory to physical memory. The index field is page number, the other fields include frame number, dirty bit, valid bit, etc.</p>
<p><strong>PRA</strong>: Page Replacement Algorithms.</p>
<p><strong>Resident Set</strong>: Data of process that is running which is already loaded to memory</p>
<p><strong>Page Fault</strong>: Page which is needed is not in the resident set, OS need fetch it from virtual memory or hard drive</p>
<p><strong>Thrashing</strong>:  OS spends too much time on solving page faults</p>
<p><strong>Critical Section</strong>: a critical section is group of instructions/statements or region of code that need to be executed atomically</p>
<p><strong>Spooling</strong>: å‡è„±æœº, a specialized form of <a href="https://en.wikipedia.org/wiki/Computer_multitasking">multi-programming</a> for the purpose of copying data between different devices. e.g. æ‰“å°ç¼“å­˜</p>

<h1 id="1-process-vs-thread" class="anchor-link"><a href="#1-process-vs-thread">1. Process v.s. Thread<span class="pilcrow">&nbsp;Â¶</span></a></h1>
<blockquote>
<p>Both processes and threads are independent sequences of execution. The typical difference is that threads (of the same process) run in a shared memory space, while processes run in separate memory spaces. (StackOverflow)</p>
</blockquote>
<p>The greatest difference is that Process has its own memory space, threads of one process can not be seen by other processes. Process A can not modify the memory space of process B by passing addresses.</p>
<p>Process can have multiple threads.</p>
<ul>
<li>User level thread: efficient, does not require kernel space, low concurrent efficiency</li>
<li>Kernel level thread: applications used kernel API to manage these thread, high concurrent efficiency</li>
</ul>

<h2 id="context-switch" class="anchor-link"><a href="#context-switch">Context Switch<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<p>When switching the context, OS needs to store the state of current process (pointers in memory space, instructions that finished), load the state of the next process and run the next process.</p>

<h2 id="system-call" class="anchor-link"><a href="#system-call">System Call<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<p>The way that programs ask for service from the OS. e.g. visit the hard drive, create new process.</p>

<h2 id="semaphoremutex" class="anchor-link"><a href="#semaphoremutex">Semaphore/Mutex<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<blockquote>
<p>In <a href="https://en.wikipedia.org/wiki/Computer_science">computer science</a>, a <strong>semaphore</strong> is a <a href="https://en.wikipedia.org/wiki/Variable_(programming)">variable</a> or <a href="https://en.wikipedia.org/wiki/Abstract_data_type">abstract data type</a> used to control access to a common resource by multiple <a href="https://en.wikipedia.org/wiki/Process_(computing)">processes</a> in a <a href="https://en.wikipedia.org/wiki/Concurrent_computing">concurrent</a> system such as a <a href="https://en.wikipedia.org/wiki/Computer_multitasking">multiprogramming</a> operating system.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-basic" data-lang="basic">loop forever
     P
     critical<span style="color:#f92672">-</span>section
     V
     non<span style="color:#f92672">-</span>critical<span style="color:#f92672">-</span>section
</code></pre></div><p><strong>P(s)</strong></p>
<p>s is a semaphore</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">s.value <span style="color:#f92672">=</span> s.value <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</code></pre></div><p>è‹¥s.value â‰¥ 0ï¼Œåˆ™è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™ï¼ˆå³s.value &lt; 0ï¼‰ï¼Œåˆ™è¿›ç¨‹è¢«é˜»å¡ï¼Œå¹¶å°†è¯¥è¿›ç¨‹æ’å…¥åˆ°ä¿¡å·é‡sçš„ç­‰å¾…é˜Ÿåˆ—s.queueä¸­</p>
<p>è¯´æ˜ï¼šå®é™…ä¸Šï¼ŒPæ“ä½œå¯ä»¥ç†è§£ä¸ºåˆ†é…èµ„æºçš„è®¡æ•°å™¨ï¼Œæˆ–æ˜¯ä½¿è¿›ç¨‹å¤„äºç­‰å¾…çŠ¶æ€çš„æ§åˆ¶æŒ‡ä»¤</p>
<p><strong>V(s)</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">s.value <span style="color:#f92672">=</span> s.value <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</code></pre></div><blockquote>
<p>Semaphore ç”¨äºæ§åˆ¶å…è®¸å¤šå°‘è¿›ç¨‹/çº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªcritical section. Mutexç›¸å½“äºåªå…è®¸ä¸€ä¸ªè¿›ç¨‹/çº¿ç¨‹è®¿é—®çš„semaphore</p>
</blockquote>

<h2 id="deadlock" class="anchor-link"><a href="#deadlock">Deadlock<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<p>4 Necessary conditions:</p>
<ol>
<li>Mutual exclusion: ä¸€èµ„æºä¸ä¾äºŒä¸», no sharing</li>
<li>Hold and wait: ä½ æœ‰å§å®¤ï¼Œä½ æƒ³ç”¨æ´—æ‰‹é—´ï¼Œæˆ‘åœ¨ç”¨ï¼Œä½ å¾—ç­‰</li>
<li>No preemption: æ±Ÿå±±æ˜¯æœ•çš„ï¼Œæœ•ä¸ç»™ä½ ï¼Œä½ ä¸èƒ½æŠ¢</li>
<li>Circular wait: Each member in the chain is waiting the resource hold by another member of the chain</li>
</ol>

<h2 id="inter-process-communication-ipc" class="anchor-link"><a href="#inter-process-communication-ipc">Inter-Process Communication, IPC<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<ol>
<li>
<p>Shared memory + Semaphore</p>
<p>ä¸åŒè¿›ç¨‹é€šè¿‡è¯»å†™æ“ä½œç³»ç»Ÿä¸­ç‰¹æ®Šçš„å…±äº«å†…å­˜è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œè¿›ç¨‹ä¹‹é—´ç”¨semaphoreå®ç°åŒæ­¥ã€‚</p>
</li>
<li>
<p>Message passing</p>
<p>è¿›ç¨‹åœ¨æ“ä½œç³»ç»Ÿå†…éƒ¨æ³¨å†Œä¸€ä¸ªportï¼Œå¹¶ä¸”ç›‘æµ‹æœ‰æ²¡æœ‰æ•°æ®ï¼Œå…¶ä»–è¿›ç¨‹ç›´æ¥å†™æ•°æ®åˆ°è¯¥portã€‚è¯¥é€šä¿¡æ–¹å¼æ›´åŠ æ¥è¿‘äºç½‘ç»œé€šä¿¡æ–¹å¼ã€‚äº‹å®ä¸Šï¼Œç½‘ç»œé€šä¿¡ä¹Ÿæ˜¯ä¸€ç§IPCï¼Œåªæ˜¯è¿›ç¨‹åˆ†å¸ƒåœ¨ä¸åŒæœºå™¨ä¸Šè€Œå·²ã€‚</p>
</li>
</ol>

<h2 id="bankers-algorithm" class="anchor-link"><a href="#bankers-algorithm">Banker&rsquo;s Algorithm<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<ol>
<li>If there are no processes remaining, the state is <strong>safe</strong>.</li>
<li>Seek a process P whose maximum additional request for each resource type is less than or equal to what remains for that resource type.
<ul>
<li>If no such process can be found, then the state is <strong>not safe</strong>.</li>
<li>If such a P can be found, the banker (manager) knows that, if it refuses all requests except those from P, then it will be able to satisfy all of P&rsquo;s requests.
<strong>Question</strong>: Why?
<strong>Answer</strong>: Look at how P was chosen.</li>
</ul>
</li>
<li>The banker now pretends that P has terminated (since the banker knows that it can guarantee this will happen). Hence the banker pretends that all of P&rsquo;s currently held resources are returned. This makes the banker richer and hence perhaps a process that was not eligible to be chosen as P previously, can now be chosen.</li>
<li>Repeat these steps.</li>
</ol>

<h2 id="interrupt" class="anchor-link"><a href="#interrupt">Interrupt<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<p>ç³»ç»Ÿè°ƒç”¨å’Œä¸­æ–­çš„å…³ç³»å°±åœ¨äºï¼Œå½“è¿›ç¨‹å‘å‡ºç³»ç»Ÿè°ƒç”¨ç”³è¯·çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªè½¯ä»¶ä¸­æ–­ã€‚äº§ç”Ÿè¿™ä¸ªè½¯ä»¶ä¸­æ–­ä»¥åï¼Œç³»ç»Ÿä¼šå»å¯¹è¿™ä¸ªè½¯ä¸­æ–­è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™è¿›ç¨‹å°±å¤„äºæ ¸å¿ƒæ€äº†ã€‚</p>

<h2 id="scheduling" class="anchor-link"><a href="#scheduling">Scheduling<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<ol>
<li>FCFS, simple, fair, not efficient</li>
<li>SJF, least average waiting time, not realistic</li>
<li>SRTF, preemptive SJF, but may starve a process requires long burst</li>
<li>Round Robin, preemptive FCFS, quantum as counter for each process, quantum too small, too much switching time; quantum too large, FCFS</li>
<li>Priority Scheduling, starve low priority process</li>
</ol>

<h1 id="2-memory-management" class="anchor-link"><a href="#2-memory-management">2. Memory Management<span class="pilcrow">&nbsp;Â¶</span></a></h1>

<h2 id="page-replacement-algorithms" class="anchor-link"><a href="#page-replacement-algorithms">Page Replacement Algorithms<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<ol>
<li>FIFO</li>
<li>Optional, pages are replaced which are not used for the longest time in the future, not realistic</li>
<li>LRU, least recently used</li>
</ol>

<h2 id="beladys-anomaly" class="anchor-link"><a href="#beladys-anomaly">Beladyâ€™s anomaly<span class="pilcrow">&nbsp;Â¶</span></a></h2>
<p>Beladyâ€™s anomaly proves that it is possible to have more page faults when increasing the number of page frames while using the First in First Out (FIFO) page replacement algorithm.  For example, if we consider reference string 3, 2, 1, 0, 3, 2, 4, 3, 2, 1, 0, 4 and 3 slots, we get 9 total page faults, but if we increase slots to 4, we get 10 page faults.</p>
<blockquote>
<p>Multiprogramming requires that we protect one process from another. That is, we need to translate the <strong>virtual addresses</strong> (a virtual address is the address as written in the program) into <strong>physical addresses</strong> (a physical address is the actual memory address in the computer) such that, at any point in time, the physical address of each process are disjoint. The hardware that performs this translation is called the <strong>MMU</strong> or <strong>Memory Management Unit</strong>.</p>
</blockquote>
<hr>
<p><strong>References:</strong></p>
<p>[1] <a href="http://wdxtub.com/interview/14520847747820.html">http://wdxtub.com/interview/14520847747820.html</a></p>
<p>[2] <a href="http://www.geeksforgeeks.org/operating-systems/">http://www.geeksforgeeks.org/operating-systems/</a></p>
</article>
        

        
        
        <nav role="navigation" class="flex-container bottom-menu">
            
<hr />
<p>


    

    
        
            <a href="/journal">ğŸ“</a>
        
    
    
        
            &#183; 
            <a href="/hack">ğŸ’¾</a>
        
            &#183; 
            <a href="/city">ğŸŒ‰</a>
        
            &#183; 
            <a href="/sea">ğŸŒŠ</a>
        
            &#183; 
            <a href="/mountain">ğŸ—»</a>
        
            &#183; 
            <a href="/bnw">ğŸ´â€â˜ ï¸</a>
        
            &#183; 
            <a href="/about">ğŸ‘¹</a>
        
    
    
    
        &#183; 
        <a href="/">
            home
        </a>
    

</p>
        </nav>
        
        
    </main>
    
    <footer class="flex-container footer">No more knowledge can be extracted from my telling
</footer>
    
    
</body>

</html>